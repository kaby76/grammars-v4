(top_level (statement (declaration (class_declaration (access_level_modifier public) class (class_name (identifier GeoManager)) (type_inheritance_clause : (type_inheritance_list (type_identifier (type_name (identifier NSObject))) , (type_inheritance_list (type_identifier (type_name (identifier CLLocationManagerDelegate)))))) (class_body { (declarations (declaration (variable_declaration (variable_declaration_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) var) (pattern_initializer_list (pattern_initializer (pattern (identifier_pattern (identifier locationManager)) (type_annotation : (type_ (type_identifier (type_name (identifier CLLocationManager)))))) (initializer (assignment_operator =) (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (identifier CLLocationManager))) (parenthesized_expression ( )))))))))) (declaration (variable_declaration (variable_declaration_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) var) (pattern_initializer_list (pattern_initializer (pattern (identifier_pattern (identifier location)) (type_annotation : (type_ (type_ (type_identifier (type_name (identifier CLLocation)))) ?))))))) (declaration (variable_declaration (variable_declaration_head var) (pattern_initializer_list (pattern_initializer (pattern (identifier_pattern (identifier locationAuthorized))) (initializer (assignment_operator =) (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (boolean_literal false)))))))))))) (declaration (variable_declaration (variable_declaration_head (declaration_modifiers (declaration_modifier (access_level_modifier public)) (declaration_modifiers (declaration_modifier class))) var) (variable_name (identifier sharedInstance)) (type_annotation : (type_ (type_identifier (type_name (identifier GeoManager))))) (code_block { (statements (statement (declaration (struct_declaration struct (struct_name (identifier SharedInstance)) (struct_body { (declarations (declaration (constant_declaration (declaration_modifiers (declaration_modifier static)) let (pattern_initializer_list (pattern_initializer (pattern (identifier_pattern (identifier instance))) (initializer (assignment_operator =) (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (identifier GeoManager))) (parenthesized_expression ( ))))))))))) })))) (statement (control_transfer_statement (return_statement return (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (identifier SharedInstance))) . (identifier instance)))))))) }))) (declaration (initializer_declaration (initializer_head (attributes (attribute (attribute_name (identifier (context_sensitive_keyword override))))) init) (parameter_clause ( )) (initializer_body (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (superclass_expression (superclass_initializer_expression super . init)))) (parenthesized_expression ( )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (identifier NSNotificationCenter))) . (identifier defaultCenter)) (parenthesized_expression ( ))) . (identifier addObserver)) (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (postfix_expression (primary_expression (self_expression self)))))) , (expression_element (identifier selector) : (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (string_literal "didEnterBackground:")))))))) , (expression_element (identifier name) : (expression (prefix_expression (postfix_expression (primary_expression (identifier UIApplicationDidEnterBackgroundNotification)))))) , (expression_element (identifier object) : (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (nil_literal nil))))))))) )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (identifier NSNotificationCenter))) . (identifier defaultCenter)) (parenthesized_expression ( ))) . (identifier addObserver)) (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (postfix_expression (primary_expression (self_expression self)))))) , (expression_element (identifier selector) : (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (string_literal "didEnterBackground:")))))))) , (expression_element (identifier name) : (expression (prefix_expression (postfix_expression (primary_expression (identifier UIApplicationWillTerminateNotification)))))) , (expression_element (identifier object) : (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (nil_literal nil))))))))) )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (identifier NSNotificationCenter))) . (identifier defaultCenter)) (parenthesized_expression ( ))) . (identifier addObserver)) (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (postfix_expression (primary_expression (self_expression self)))))) , (expression_element (identifier selector) : (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (string_literal "didEnterForeground:")))))))) , (expression_element (identifier name) : (expression (prefix_expression (postfix_expression (primary_expression (identifier UIApplicationWillEnterForegroundNotification)))))) , (expression_element (identifier object) : (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (nil_literal nil))))))))) ))))))) })))) (declaration (deinitializer_declaration deinit (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (identifier NSNotificationCenter))) . (identifier defaultCenter)) (parenthesized_expression ( ))) . (identifier removeObserver)) (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (postfix_expression (primary_expression (self_expression self))))))) ))))))) }))) (declaration (function_declaration (function_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) func) (function_name (identifier start)) (function_signature (parameter_clauses (parameter_clause ( )))) (function_body (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier requestWhenInUseAuthorization)) (parenthesized_expression ( )))))) (statement (branch_statement (if_statement if (condition_clause (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier isLocatingAllowed)) (parenthesized_expression ( )))))) (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier delegate))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (primary_expression (self_expression self)))))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier desiredAccuracy))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (primary_expression (identifier kCLLocationAccuracyHundredMeters)))))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier startUpdatingLocation)) (parenthesized_expression ( ))))))) }))))) })))) (declaration (function_declaration (function_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) func) (function_name (identifier stop)) (function_signature (parameter_clauses (parameter_clause ( )))) (function_body (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier stopUpdatingLocation)) (parenthesized_expression ( )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier delegate))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (nil_literal nil))))))))))) })))) (declaration (function_declaration (function_head func) (function_name (identifier isLocatingAllowed)) (function_signature (parameter_clauses (parameter_clause ( ))) (function_result (arrow_operator - >) (type_ (type_identifier (type_name (identifier Bool)))))) (function_body (code_block { (statements (statement (declaration (variable_declaration (variable_declaration_head var) (pattern_initializer_list (pattern_initializer (pattern (identifier_pattern (identifier allowed))) (initializer (assignment_operator =) (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (boolean_literal true))))))))))))) (statement (branch_statement (if_statement if (condition_clause (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (identifier CLLocationManager))) . (identifier locationServicesEnabled)) (parenthesized_expression ( )))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =) (operator_character (operator_head =)))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (boolean_literal false)))))))))) (code_block { (statements (statement (expression (prefix_expression (postfix_expression (primary_expression (identifier allowed)))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (boolean_literal false))))))))))) })))) (statement (branch_statement (if_statement if (condition_clause (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (identifier CLLocationManager))) . (identifier authorizationStatus)) (parenthesized_expression ( )))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =) (operator_character (operator_head =)))) (prefix_expression (postfix_expression (postfix_expression (primary_expression (identifier CLAuthorizationStatus))) . (identifier Denied))))))) (code_block { (statements (statement (expression (prefix_expression (postfix_expression (primary_expression (identifier allowed)))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (boolean_literal false))))))))))) })))) (statement (control_transfer_statement (return_statement return (expression (prefix_expression (postfix_expression (primary_expression (identifier allowed))))))))) })))) (declaration (function_declaration (function_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) func) (function_name (identifier locationManager)) (function_signature (parameter_clauses (parameter_clause ( (parameter_list (parameter (local_parameter_name (identifier manager)) (type_annotation : (type_ (type_ (type_identifier (type_name (identifier CLLocationManager)))) !))) , (parameter (external_parameter_name (identifier didUpdateLocations)) (local_parameter_name (identifier locations)) (type_annotation : (type_ (type_ [ (type_ (type_identifier (type_name (identifier AnyObject)))) ]) !)))) )))) (function_body (code_block { (statements (statement (branch_statement (if_statement if (condition_clause (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (identifier locations))) . (identifier count))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head >))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (numeric_literal (integer_literal 0)))))))) (binary_expression (binary_operator (operator_ (operator_head &) (operator_character (operator_head &)))) (prefix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier location)))) (binary_expression (binary_operator (operator_ (operator_head =) (operator_character (operator_head =)))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (nil_literal nil)))))))))) (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier willChangeValueForKey)) (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (string_literal "location"))))))))) )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier location))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (postfix_expression (primary_expression (identifier locations))) [ (expression_list (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (numeric_literal (integer_literal 0))))))))) ]))) (binary_expression (type_casting_operator as ? (type_ (type_identifier (type_name (identifier CLLocation))))))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier didChangeValueForKey)) (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (string_literal "location"))))))))) )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier stopUpdatingLocation)) (parenthesized_expression ( ))))))) }))))) })))) (declaration (function_declaration (function_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) func) (function_name (identifier locationManager)) (function_signature (parameter_clauses (parameter_clause ( (parameter_list (parameter (local_parameter_name (identifier manager)) (type_annotation : (type_ (type_ (type_identifier (type_name (identifier CLLocationManager)))) !))) , (parameter (external_parameter_name (identifier didFailWithError)) (local_parameter_name (identifier error)) (type_annotation : (type_ (type_ (type_identifier (type_name (identifier NSError)))) !)))) )))) (function_body (code_block { })))) (declaration (function_declaration (function_head (declaration_modifiers (declaration_modifier (access_level_modifier public))) func) (function_name (identifier locationManager)) (function_signature (parameter_clauses (parameter_clause ( (parameter_list (parameter (local_parameter_name (identifier manager)) (type_annotation : (type_ (type_ (type_identifier (type_name (identifier CLLocationManager)))) !))) , (parameter (external_parameter_name (identifier didChangeAuthorizationStatus)) (local_parameter_name (identifier status)) (type_annotation : (type_ (type_identifier (type_name (identifier CLAuthorizationStatus))))))) )))) (function_body (code_block { (statements (statement (branch_statement (if_statement if (condition_clause (expression (prefix_expression (postfix_expression (primary_expression (parenthesized_expression ( (expression_element_list (expression_element (expression (prefix_expression (prefix_operator (operator_ (operator_head !))) (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationAuthorized))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head &) (operator_character (operator_head &)))) (prefix_expression (postfix_expression (primary_expression (identifier status))))) (binary_expression (binary_operator (operator_ (operator_head =) (operator_character (operator_head =)))) (prefix_expression (postfix_expression (primary_expression (implicit_member_expression . (identifier AuthorizedWhenInUse)))))))))) ))))))) (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier start)) (parenthesized_expression ( ))))))) }))))) })))) (declaration (function_declaration (function_head func) (function_name (identifier didEnterBackground)) (function_signature (parameter_clauses (parameter_clause ( (parameter_list (parameter (local_parameter_name (identifier notification)) (type_annotation : (type_ (type_identifier (type_name (identifier AnyObject))))))) )))) (function_body (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier stopUpdatingLocation)) (parenthesized_expression ( )))))) (statement (expression (prefix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier location))) (binary_expressions (binary_expression (binary_operator (operator_ (operator_head =))) (prefix_expression (postfix_expression (primary_expression (literal_expression (literal (nil_literal nil))))))))))) })))) (declaration (function_declaration (function_head func) (function_name (identifier didEnterForeground)) (function_signature (parameter_clauses (parameter_clause ( (parameter_list (parameter (local_parameter_name (identifier notification)) (type_annotation : (type_ (type_identifier (type_name (identifier AnyObject))))))) )))) (function_body (code_block { (statements (statement (expression (prefix_expression (postfix_expression (postfix_expression (postfix_expression (postfix_expression (primary_expression (self_expression self))) . (identifier locationManager)) . (identifier startUpdatingLocation)) (parenthesized_expression ( ))))))) }))))) })))) <EOF>)